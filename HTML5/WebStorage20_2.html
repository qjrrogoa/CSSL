<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>WebStorage20_2.html</title>
    <script>
        /*
        쿠키는 만료기간이 있다
        스토리지는 없다
        */
    </script>
</head>
<body>
    <fieldset>
        <legend>웹 스토리지를 이용한 방문자 회원 수 카운팅(세션 스토리지)</legend>
        <span id="display" style="color: red;font-size: 1.2em;font-weight: bold;"></span>
        <button onclick="removeStorage()">세션 스토리지 삭제</button>
    </fieldset>
    <script>
        //브라우저의 웹 스토리지 지원여부 판단]
        console.log(typeof(Storage) != undefined);
        var span;
        if(typeof(Storage) != undefined){//웹 스토리지를 제공하는 브라우저
            //span객체 얻기
            span = document.getElementById("display");
            span.innerHTML="웹 스토리지를 지원하는 브라우저 입니다.";
            console.log("자료형 : %s, sessionStorage:%O",typeof sessionStorage,sessionStorage);
            //세션 스토리지에 저장한 방문 횟수 읽기
            var counter=sessionStorage.getItem("counter");
            console.log("counter:%s",counter);
            if(counter==null){
                //방문횟수 1로 초기화
                sessionStorage.setItem("counter",1)
                span.innerHTML="당신이 최초 방문자 입니다."
            }
            else{//세션 스토리지에 키값이 있는 경우
                //방문횟수 증가]
                span.innerHTML=counter++ +"번째 방문하셨군요";
                //다시 방문 횟수 스토리지에 저장]
                sessionStorage.setItem("counter",counter);

            }
        }
        function removeStorage(){
            span.innerHTML = "방문 횟수가 초기화 되었어요";
            sessionStorage.removeItem("counter");
        }
    </script>
</body>
</html>